version: "3.1"

intents:
  - greet
  - goodbye
  - ask_area
  - ask_math
  - choose_shape
  - choose_math_task
  - choose_speed_target
  - inform
  - restart_area

entities:
  - shape
  - math_task
  - speed_target

slots:
  shape:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: shape
        conditions:
          - active_loop: area_form
      - type: from_text
        intent: choose_shape
        conditions:
          - active_loop: area_form
            requested_slot: shape

  length:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: length

  width:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: width

  radius:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: radius

  base:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: base

  height:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: height

  b1:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: b1

  b2:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: area_form
            requested_slot: b2

  math_task:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: math_task
        conditions:
          - active_loop: math_form
      - type: from_text
        intent: choose_math_task
        conditions:
          - active_loop: math_form
            requested_slot: math_task

  speed_target:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: speed_target
        conditions:
          - active_loop: math_form
            requested_slot: speed_target
      - type: from_text
        intent: choose_speed_target
        conditions:
          - active_loop: math_form
            requested_slot: speed_target

  percent_part:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: percent_part

  percent_total:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: percent_total

  ratio_a:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: ratio_a

  ratio_b:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: ratio_b

  prop_a:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: prop_a

  prop_b:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: prop_b

  prop_c:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: prop_c

  speed_value:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: speed_value

  distance_value:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: distance_value

  time_value:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: time_value

  coord_x:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: coord_x

  coord_y:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: coord_y

  comp_len1:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: comp_len1

  comp_w1:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: comp_w1

  comp_len2:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: comp_len2

  comp_w2:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: comp_w2

  para_base:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: para_base

  para_height:
    type: float
    influence_conversation: false
    mappings:
      - type: from_text
        intent: inform
        conditions:
          - active_loop: math_form
            requested_slot: para_height

responses:
  utter_greet:
    - text: "–°–∞–π–Ω —É—É üëã '–¥“Ø—Ä—Å–Ω–∏–π —Ç–∞–ª–±–∞–π –æ–ª' –≥—ç–∂ –±–∏—á—ç—ç–¥ —ç—Ö–ª“Ø“Ø–ª—ç—ç—Ä—ç–π."

  utter_goodbye:
    - text: "–ë–∞—è—Ä—Ç–∞–π üëã"

  utter_how_to_start:
    - text: "–≠—Ö–ª“Ø“Ø–ª—ç—Ö–∏–π–Ω —Ç—É–ª–¥: '–¥“Ø—Ä—Å–Ω–∏–π —Ç–∞–ª–±–∞–π –æ–ª' –≥—ç–∂ –±–∏—á—ç—ç—Ä—ç–π."

  utter_ask_shape:
    - text: "–Ø–º–∞—Ä –¥“Ø—Ä—Å–Ω–∏–π —Ç–∞–ª–±–∞–π –æ–ª–æ—Ö –≤—ç?"
      buttons:
        - title: "–¢—ç–≥—à ”©–Ω—Ü”©–≥—Ç"
          payload: '/choose_shape{{"shape":"rectangle"}}'
        - title: "–¢–æ–π—Ä–æ–≥"
          payload: '/choose_shape{{"shape":"circle"}}'
        - title: "–ì—É—Ä–≤–∞–ª–∂–∏–Ω"
          payload: '/choose_shape{{"shape":"triangle"}}'
        - title: "–¢—Ä–∞–ø–µ—Ü"
          payload: '/choose_shape{{"shape":"trapezoid"}}'
        - title: "–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º"
          payload: '/choose_shape{{"shape":"parallelogram"}}'


  utter_ask_length:
    - text: "–£—Ä—Ç —Ö—ç–¥ –≤—ç? (–∂: 5)"
  utter_ask_width:
    - text: "”®—Ä–≥”©–Ω —Ö—ç–¥ –≤—ç? (–∂: 3)"
  utter_ask_radius:
    - text: "–†–∞–¥–∏—É—Å —Ö—ç–¥ –≤—ç? (–∂: 5)"
  utter_ask_base:
    - text: "–°—É—É—Ä—å —Ö—ç–¥ –≤—ç? (–∂: 6)"
  utter_ask_height:
    - text: "”®–Ω–¥”©—Ä —Ö—ç–¥ –≤—ç? (–∂: 4)"
  utter_ask_b1:
    - text: "–¢—Ä–∞–ø–µ—Ü—ã–Ω —Å—É—É—Ä—å1 —Ö—ç–¥ –≤—ç? (–∂: 6)"
  utter_ask_b2:
    - text: "–¢—Ä–∞–ø–µ—Ü—ã–Ω —Å—É—É—Ä—å2 —Ö—ç–¥ –≤—ç? (–∂: 10)"

  utter_ask_math_task:
    - text: "–Ø–º–∞—Ä –±–æ–¥–ª–æ–≥–æ –±–æ–¥–æ—Ö –≤—ç?"
      buttons:
        - title: "–•—É–≤—å (%)"
          payload: '/choose_math_task{{"math_task":"percent"}}'
        - title: "–•–∞—Ä—å—Ü–∞–∞"
          payload: '/choose_math_task{{"math_task":"ratio"}}'
        - title: "–ü—Ä–æ–ø–æ—Ä—Ü"
          payload: '/choose_math_task{{"math_task":"proportion"}}'
        - title: "–•—É—Ä–¥-–∑–∞–º-—Ö—É–≥–∞—Ü–∞–∞"
          payload: '/choose_math_task{{"math_task":"speed"}}'
        - title: "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç"
          payload: '/choose_math_task{{"math_task":"coordinate"}}'
        - title: "–ù–∏–π–ª–º—ç–ª —Ç–∞–ª–±–∞–π"
          payload: '/choose_math_task{{"math_task":"composite_area"}}'
        - title: "–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º"
          payload: '/choose_math_task{{"math_task":"parallelogram"}}'

  utter_ask_percent_part:
    - text: "–•—ç—Å—ç–≥ —Ö—ç–¥ –≤—ç? (–∂: 20)"
  utter_ask_percent_total:
    - text: "–ù–∏–π—Ç —Ö—ç–¥ –≤—ç? (–∂: 80)"
  utter_ask_ratio_a:
    - text: "–•–∞—Ä—å—Ü–∞–∞–Ω—ã —ç—Ö–Ω–∏–π —Ç–æ–æ —Ö—ç–¥ –≤—ç? (–∂: 3)"
  utter_ask_ratio_b:
    - text: "–•–∞—Ä—å—Ü–∞–∞–Ω—ã —Ö–æ—ë—Ä –¥–∞—Ö—å —Ç–æ–æ —Ö—ç–¥ –≤—ç? (–∂: 5)"
  utter_ask_prop_a:
    - text: "–ü—Ä–æ–ø–æ—Ä—Ü—ã–Ω a —Ö—ç–¥ –≤—ç? (a:b = c:x) (–∂: 2)"
  utter_ask_prop_b:
    - text: "–ü—Ä–æ–ø–æ—Ä—Ü—ã–Ω b —Ö—ç–¥ –≤—ç? (–∂: 3)"
  utter_ask_prop_c:
    - text: "–ü—Ä–æ–ø–æ—Ä—Ü—ã–Ω c —Ö—ç–¥ –≤—ç? (–∂: 4)"
  utter_ask_speed_target:
    - text: "–Æ—É–≥ –æ–ª–æ—Ö –≤—ç?"
      buttons:
        - title: "–•—É—Ä–¥ (v)"
          payload: '/choose_speed_target{{"speed_target":"speed"}}'
        - title: "–ó–∞–º (s)"
          payload: '/choose_speed_target{{"speed_target":"distance"}}'
        - title: "–•—É–≥–∞—Ü–∞–∞ (t)"
          payload: '/choose_speed_target{{"speed_target":"time"}}'
  utter_ask_speed_value:
    - text: "–•—É—Ä–¥ —Ö—ç–¥ –≤—ç? (–∂: 60)"
  utter_ask_distance_value:
    - text: "–ó–∞–º —Ö—ç–¥ –≤—ç? (–∂: 120)"
  utter_ask_time_value:
    - text: "–•—É–≥–∞—Ü–∞–∞ —Ö—ç–¥ –≤—ç? (–∂: 2)"
  utter_ask_coord_x:
    - text: "x —Ö—ç–¥ –≤—ç? (–∂: -2)"
  utter_ask_coord_y:
    - text: "y —Ö—ç–¥ –≤—ç? (–∂: 3)"
  utter_ask_comp_len1:
    - text: "1-—Ä —Ç—ç–≥—à ”©–Ω—Ü”©–≥—Ç–∏–π–Ω —É—Ä—Ç —Ö—ç–¥ –≤—ç? (–∂: 5)"
  utter_ask_comp_w1:
    - text: "1-—Ä —Ç—ç–≥—à ”©–Ω—Ü”©–≥—Ç–∏–π–Ω ”©—Ä–≥”©–Ω —Ö—ç–¥ –≤—ç? (–∂: 3)"
  utter_ask_comp_len2:
    - text: "2-—Ä —Ç—ç–≥—à ”©–Ω—Ü”©–≥—Ç–∏–π–Ω —É—Ä—Ç —Ö—ç–¥ –≤—ç? (–∂: 4)"
  utter_ask_comp_w2:
    - text: "2-—Ä —Ç—ç–≥—à ”©–Ω—Ü”©–≥—Ç–∏–π–Ω ”©—Ä–≥”©–Ω —Ö—ç–¥ –≤—ç? (–∂: 2)"
  utter_ask_para_base:
    - text: "–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º—ã–Ω —Å—É—É—Ä—å —Ö—ç–¥ –≤—ç? (–∂: 6)"
  utter_ask_para_height:
    - text: "–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º—ã–Ω ”©–Ω–¥”©—Ä —Ö—ç–¥ –≤—ç? (–∂: 4)"

forms:
  area_form:
    required_slots:
      - shape
      - length
      - width
      - radius
      - base
      - height
      - b1
      - b2
  math_form:
    required_slots:
      - math_task
      - percent_part
      - percent_total
      - ratio_a
      - ratio_b
      - prop_a
      - prop_b
      - prop_c
      - speed_target
      - speed_value
      - distance_value
      - time_value
      - coord_x
      - coord_y
      - comp_len1
      - comp_w1
      - comp_len2
      - comp_w2
      - para_base
      - para_height

actions:
  - validate_area_form
  - validate_math_form
  - action_calculate_area
  - action_calculate_math
  - action_reset_area
  - action_reset_math

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
