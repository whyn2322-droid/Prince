version: "3.1"

rules:
  # NOTE: Don't start forms from greet. Otherwise it contradicts other greet rules
  # and creates RulePolicy conflicts.
  - rule: Greet
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - rule: Activate perimeter form
    steps:
      - intent: request_perimeter
      - action: perimeter_form
      - active_loop: perimeter_form

  - rule: Submit perimeter form
    condition:
      - active_loop: perimeter_form
    steps:
      - action: perimeter_form
      - active_loop: null
      - action: action_calculate_perimeter

  - rule: Out of scope
    steps:
      - intent: out_of_scope
      - action: utter_out_of_scope
